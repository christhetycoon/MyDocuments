var _BdBrowser={},_Instance={},_BdElement={},_System={};_System.path="/ui/scripts/CommentEditor/";_System.imagePath="http://img.baidu.com/hi/";function _Bd$(B){if(typeof B=="string"){return document.getElementById(B)}return B}_BdElement.addClassName=function(J,I){var G=J.className.split(" ");var H=false;for(var K=0,L=G.length;K<L;K++){if(G[K]==I){H=true;break}}if(!H){J.className=G.concat(I).join(" ")}};_BdElement.removeClassName=function(D,F){var E=new RegExp("(^| )"+F+"( |$)","g");D.className=D.className.replace(E,"$2")};_BdElement._realLeftTop=function(E){var F=parseInt(E.currentStyle.borderTopWidth);var D=parseInt(E.currentStyle.borderLeftWidth);return{left:isNaN(D)?0:D,top:isNaN(F)?0:F}};_BdElement.realOffset=function(K){if(!K){return null}var L=K,P=0,J=0,O=0,N=0,M=this.body();do{O+=L.offsetLeft||0;N+=L.offsetTop||0;if(_BdBrowser.ie&&"tdthdiv".indexOf(L.tagName.toLowerCase())>-1){var I=this._realLeftTop(L);O+=I.left;N+=I.top}if(_BdBrowser.safari&&"tabletdth".indexOf(L.tagName.toLowerCase())>-1){var I=this._realLeftTop(L);O+=I.left;N+=I.top}L=L.offsetParent}while(L);if(!_BdBrowser.opera){do{P+=K.scrollLeft||0;J+=K.scrollTop||0;K=K.offsetParent}while(K)}return{x:O-P+M.scrollLeft,y:N-J+M.scrollTop}};_BdElement.body=function(){var M=0,O=0,R=0,K=0,L=0,N=0;var Q=window,H=document,P=H.documentElement;M=P.clientWidth||H.body.clientWidth;O=Q.innerHeight||P.clientHeight||H.body.clientHeight;K=H.body.scrollTop||P.scrollTop;R=H.body.scrollLeft||P.scrollLeft;L=Math.max(H.body.scrollWidth,P.scrollWidth||0);N=Math.max(H.body.scrollHeight,P.scrollHeight||0,O);return{scrollTop:K,scrollLeft:R,scrollWidth:L,scrollHeight:N,clientWidth:M,clientHeight:O}};if(typeof (HTMLElement)!="undefined"&&!window.opera){HTMLElement.prototype.__defineGetter__("currentStyle",function(){return this.ownerDocument.defaultView.getComputedStyle(this,null)});HTMLElement.prototype.insertAdjacentHTML=function(D,F){var E=this.ownerDocument.createRange();E.setStartBefore(this);E=E.createContextualFragment(F);this.insertAdjacentElement(D,E)};HTMLElement.prototype.insertAdjacentElement=function(C,D){switch(C){case"beforeBegin":this.parentNode.insertBefore(D,this);break;case"afterBegin":this.insertBefore(D,this.firstChild);break;case"beforeEnd":this.appendChild(D);break;case"afterEnd":if(!this.nextSibling){this.parentNode.appendChild(D)}else{this.parentNode.insertBefore(D,this.nextSibling)}break}}}if(!window.attachEvent&&window.addEventListener){window.attachEvent=HTMLElement.prototype.attachEvent=document.attachEvent=function(H,F,G){var E=G?true:false;this.addEventListener(H.replace(/^on/i,"").toLowerCase(),F,E)};window.detachEvent=HTMLElement.prototype.detachEvent=document.detachEvent=function(H,F,G){var E=G?true:false;this.removeEventListener(H.replace(/^on/i,"").toLowerCase(),F,E)}}_System.extend=function(E,F){for(var D in F){E[D]=F[D]}return E};Function.prototype.Extends=function(F,I){var G=this.prototype,J,H=this.prototype=new F();if(I){H._className=I}for(J in G){H[J]=G[J]}this.prototype.constructor=G.constructor;G=null;if(H.hashCode){delete _Instance[H.hashCode]}return H};function uniqueID(){var D=function(){return Math.round(Math.random()*2147483648)};var C=function(){return D().toString(36)+(D()^(new Date()).getTime()).toString(36)};return C()+C()}function loadCssFile(F){var G=document;var E=G.body;var H=G.createElement("LINK");if(H&&E){H.href=F;H.type="text/css";H.rel="Stylesheet";E.insertBefore(H,E.firstChild)}}(function(){if(_BdBrowser.platform){return }var C=window.navigator.userAgent;_BdBrowser.platform=window.navigator.platform;_BdBrowser.firefox=C.indexOf("Firefox")>0;_BdBrowser.opera=typeof (window.opera)=="object";_BdBrowser.ie=!_BdBrowser.opera&&C.indexOf("MSIE")>0;_BdBrowser.mozilla=window.navigator.product=="Gecko";_BdBrowser.netscape=window.navigator.vendor=="Netscape";_BdBrowser.gecko=C.indexOf("Gecko")>-1&&C.indexOf("KHTML")==-1;_BdBrowser.safari=C.indexOf("Safari")>-1;if(_BdBrowser.firefox){var D=/Firefox(\s|\/)(\d+(\.\d+)?)/}else{if(_BdBrowser.ie){var D=/MSIE( )(\d+(\.\d+)?)/}else{if(_BdBrowser.opera){var D=/Opera(\s|\/)(\d+(\.\d+)?)/}else{if(_BdBrowser.netscape){var D=/Netscape(\s|\/)(\d+(\.\d+)?)/}else{if(_BdBrowser.safari){var D=/Version(\/)(\d+(\.\d+)?)/}else{if(_BdBrowser.mozilla){var D=/rv(\:)(\d+(\.\d+)?)/}}}}}}if("undefined"!=typeof (D)&&D.test(C)){_BdBrowser.version=parseFloat(RegExp.$2)}})();String.prototype.format=function(){if(arguments.length==0){return this}for(var D=this,C=0;C<arguments.length;C++){D=D.replace(new RegExp("\\{"+C+"\\}","g"),arguments[C])}return D};var _BdPopupLayer=function(){_Instance[this.hashCode=uniqueID()]=this;this.busy=false;this.exclusive=false;this.autoFit=true;this.isOpen=false;this.defaultContent="<nobr><div id='Content' nowrap='true' style='border:solid 1px #666666'></div></nobr>";this.hideTrigger={onblur:true,onscroll:true,onmousedown:true};this.initialize()};_BdPopupLayer._layers=[];_BdPopupLayer._focusOnLayer=false;_System.extend(_BdPopupLayer.prototype,{initialize:function(){_BdPopupLayer._layers[_BdPopupLayer._layers.length]=this;var G=this;G.id=G.name="_BdPopupLayer_"+G.hashCode;this.onBlurHandler=function(){setTimeout(function(){if(!_BdPopupLayer._focusOnLayer){G.hide()}},10)};this.onClickHandler=function(){G.hide()};this.onScrollHandler=function(){G.hide()};var F="<iframe frameborder='0' name='"+G.name+"' style='position:absolute; z-index:65001; display:none;' scrolling='no' id='"+G.id+"'></iframe>";if(!document.body){document.write(F)}else{document.body.insertAdjacentHTML("afterBegin",F)}var E=document.getElementsByTagName("IFRAME");for(var H=0;H<E.length;H++){if(E[H].id==this.id){this.layer=E[H]}}frames[this.name].document.write("            <html>                <head>                    <style type='text/css'>                        html *{-moz-user-select:none;}                        body,td,th{font:12px Geneva, Arial, sans-serif; cursor:default;}                        body{margin:0px; background-color:#FFF;}                        .tabPanel{height:253px;width:344px;}                        .tabContent{overflow-y:auto;float:left;width:280px;height:253px;}                        .tabContentHide{display:none;width:263px;height:253px}                        .tabContentShow{display:block;width:263px;height:253px}                        .tabMenu{float:right;width:64px;height:140px;text-align:center;line-height:24px;height:24px;font:'\u5b8b\u4f53';font-size:12px;}                        .tabMenuHover{background:#E8E8FD;}                        .tabMenuNoHover{cursor:pointer;}                        .tableCell{background:#d7d79f;}                        .tableCellOver{background:#ffffbe;}                        .reviewHide{display:block;position:absolute;width:50px;height:50px;left:5px;right:200px;top:3px;bottom:200px;background-color:#FFFFFF;text-align:conter;}                        .review{width:50px;height:50px;background-position:center;background-repeat:no-repeat;border:1px solid #000;}                        .tabStyle{position:absolute;left:356px;right:200px;top:12px;bottom:200px;z-index:65533;width:50px;height:50px;background:#FFFFFF;}                        .jd img{background:transparent url(http://img.baidu.com/hi/default/jxFace2.gif?v=1.1) no-repeat scroll left top; cursor:pointer; display:block; width:35px; height:35px; }                        .pp img{background:transparent url(http://img.baidu.com/hi/default/fFace.gif?v=1.1) no-repeat scroll left top; cursor:pointer; display:block; width:25px; height:25px; }                        .ldw img{background:transparent url(http://img.baidu.com/hi/default/wFace.gif?v=1.1) no-repeat scroll left top; cursor:pointer; display:block; width:35px; height:35px; }                        .tsj img{background:transparent url(http://img.baidu.com/hi/default/tFace.gif?v=1.1) no-repeat scroll left top; cursor:pointer; display:block; width:35px; height:35px; }                        .cat img{background:transparent url(http://img.baidu.com/hi/default/cFace.gif?v=1.1) no-repeat scroll left top; cursor:pointer; display:block; width:35px; height:35px; }                        .bb img{background:transparent url(http://img.baidu.com/hi/default/bFace.gif?v=1.1) no-repeat scroll left top; cursor:pointer; display:block; width:35px; height:35px; }                        .youa img{background:transparent url(http://img.baidu.com/hi/default/yFace.gif?v=1.1) no-repeat scroll left top; cursor:pointer; display:block; width:35px; height:35px; }                    </style>                </head>                <body onfocus='parent._BdPopupLayer._focusOnLayer=true;' onselectstart='return false'>"+this.defaultContent+"</body>            </html>");frames[this.name].document.close();window.attachEvent("onfocus",function(A){_BdPopupLayer._focusOnLayer=false})},write:function(B){this.content.innerHTML=B},showBy:function(F,E,D){this.show(0,0,E,D,F)},showByXYWH:function(I,J,G,H,F){this.show(J,G,H,F,I)},show:function(Q,Z,S,W,e){var U=Q=Q?(isNaN(Q)?0:parseInt(Q,10)):0;var V=Z=Z?(isNaN(Z)?0:parseInt(Z,10)):0;S=S?(isNaN(S)?"auto":parseInt(S,10)):"auto";W=W?(isNaN(W)?"auto":parseInt(W,10)):"auto";var d=_BdElement.body(),f=0;if(e&&(e=_Bd$(e))&&e.tagName){f=e.offsetHeight;var a=_BdElement.realOffset(e);Q+=a.x;Z+=a.y}this.layer.style.top=Z+f+"px";this.layer.style.left=Q+"px";this.layer.style.width="2px";this.layer.style.height="2px";if(_BdBrowser.netscape&&_BdBrowser.netscape.version<7.2){this.layer.style.visibility=""}else{this.layer.style.display=""}var R=this.layer.offsetWidth;var X=this.layer.offsetHeight;if(d.scrollLeft+d.clientWidth<Q+R){if(Q-R>=d.scrollLeft){Q-=R}else{Q=d.scrollLeft+d.clientWidth-R}}if(d.scrollTop+d.clientHeight<Z+X+f){if(Z-X>=d.scrollTop){Z-=X}else{Z=d.scrollTop+d.clientHeight-X}}else{Z+=f}var b=this.document,c=dsh=0;var T=b.body.scrollWidth;var Y=b.body.scrollHeight;if(b.documentElement){c=b.documentElement.scrollWidth;dsh=b.documentElement.scrollHeight}if(isNaN(S)){S=Math.max(c,T,this.content.offsetWidth)}if(isNaN(W)){W=Math.max(dsh,Y,this.content.offsetHeight)}this.width=S||2;this.height=W||2;this.layer.style.top=(this.top=Z)+"px";this.layer.style.left=(this.left=Q)+"px";this.layer.style.width=this.width+"px";this.layer.style.height=this.height+"px";if(this.hideTrigger.onblur){window.attachEvent("onblur",this.onBlurHandler)}if(this.hideTrigger.onscroll){window.attachEvent("onscroll",this.onScrollHandler)}if(this.hideTrigger.onmousedown){document.attachEvent("onmousedown",this.onClickHandler)}this.isOpen=true;this.onshow()},hide:function(){this.isOpen=false;this.layer.style.zIndex=65001;if(_BdBrowser.netscape&&_BdBrowser.netscape.version<7.2){this.layer.style.visibility="hidden"}else{this.layer.style.display="none"}if(this.hideTrigger.onblur){window.detachEvent("onblur",this.onBlurHandler)}if(this.hideTrigger.onscroll){window.detachEvent("onscroll",this.onScrollHandler)}if(this.hideTrigger.onmousedown){document.detachEvent("onmousedown",this.onClickHandler)}if(!this.exclusive){this.document.body.innerHTML=this.defaultContent;this.width=this.height=0;this.style=this.busy=false}this.onhide()},getElementById:function(B){return this.document.getElementById(B)}});window.attachEvent("onload",function(){new _BdPopupLayer()});_BdPopupLayer.provider=function(E){var F,D=0;for(;D<this._layers.length;D++){if(!this._layers[D].busy){F=this._layers[D];break}}if(D==this._layers.length-1){new _BdPopupLayer()}if(D==this._layers.length){F=new _BdPopupLayer(E)}F.busy=true;F.window=F.layer.contentWindow;F.document=F.window.document;F.content=F.document.getElementById("Content");F.style=F.content.style;return F};function BdEditor(C,D){this.textarea=_Bd$(C);this.width=D.width||"100%";this.height=D.height||"300px";this.modules={};BdEditor.instance=_Instance[this.hashCode=uniqueID()]=this}BdEditor.prototype.render=function(){loadCssFile(_System.path+"css/default/bdeditor.css");var B="        <div id='bdeditor_container_{2}'>            <table width='{0}' height='{1}' cellpadding='0' cellspacing='0' border='0'>                <tr>                    <td id='editor_toolbar_{2}' class='ToolbarContainer'></td>                </tr>                <tr>                    <td id='editor_area_{2}' class='EditorContainer'></td>                </tr>            </table>        </div>    ".format(this.width,this.height,this.hashCode);this.textarea.insertAdjacentHTML("beforeBegin",B);this.renderToolbar();this.renderEditorArea();this.makeEditable();this.attachEventListener();this.isLightFont=false};BdEditor.prototype.setCookie=function(C,D){document.cookie=C+"="+escape(D)+";expires=Wed, 28-Nov-02 01:45:46 GMT;path=/;domain=.baidu.com";document.cookie=C+"="+escape(D)+";expires=Wed, 28-Nov-37 01:45:46 GMT;path=/"};BdEditor.prototype.getCookie=function(F){var D,E=new RegExp("(^| )"+F+"=([^;]*)(;|$)");if(D=document.cookie.match(E)){return unescape(D[2])}};BdEditor.prototype.renderToolbar=function(){var N=["<div class='ToolbarStrip'><table border='0' cellspacing='0' cellpadding='0'><tr>"];var J=["_TiSmiley"];if(_BdBrowser.ie){J=["_TiSmiley","_LightFont"]}for(var O=0,P=J.length;O<P;O++){var L=this.modules[J[O]]=new window[J[O]]();if(O==1){var M='<input  type="checkbox" name="_LightFont" id="_LightFont'+this.hashCode+'" onclick="switchLightFont(this.checked)" />';N.push("<td width='100%'  align='right' valign='middle'><div class='ToolbarItem'>"+M+"</div></td>")}var K=(O==0)?"nowrap='nowrap'":"";N.push("<td nowrap='nowrap'>"+L.render()+"</td>")}"editor.lightFontModule.switchLightFont";N.push("</tr></table></div>");var Q=_Bd$("editor_toolbar_"+this.hashCode);Q.innerHTML=N.join("");if(_BdBrowser.ie){this.lightFontModule=_Bd$("_LightFont"+this.hashCode);this.lightFontModule.handler=this;this.lightFontColor="#0000FF";this.lightFontModule.switchLightFont=function(A){this.handler.isLightFont=A;var C=A?this.handler.lightFontColor:"0";if(C!="0"){C=C.replace("#","")}this.handler.setCookie("BDLFONT",C);if(!A){var B=this.handler.modules._LightFont.layer;if(B){B.hide()}}};var R=this.getCookie("BDLFONT");if(typeof R=="undefined"){R="0"}if(R!="0"){this.lightFontModule.checked=true;this.lightFontModule.switchLightFont(true);_Bd$("LightFont_Font_"+this.hashCode).style.color="#"+R;this.lightFontColor="#"+R;this.setCookie("BDLFONT",R)}else{this.lightFontModule.checked=false;this.lightFontModule.switchLightFont(false);_Bd$("LightFont_Font_"+this.hashCode).style.color="#0000FF";this.lightFontColor="#0000FF";this.setCookie("BDLFONT",R)}}};BdEditor.prototype.renderEditorArea=function(){var editor_area=_Bd$("editor_area_"+this.hashCode);editor_area.innerHTML="<iframe width='100%' height='"+this.height+"' frameborder='0' src='javascript:void(0)'></iframe>";this.iframe=editor_area.lastChild;var w=this.window=this.iframe.contentWindow;var d=this.document=this.window.document;d.open();d.write('<html><head><style type="text/css">    /*<![CDATA[*/    body{ background-color: #ffffff; padding: 5px 5px 5px 5px; margin: 0px; }     body, td { font-family: Arial, Verdana, sans-serif; font-size: 14px; }    p{ margin:0px; }    /*]]>*/    </style></head><body></body></html>');d.close();var code=";window.onerror=function(e){return true;}";if(window.execScript){w.execScript(code)}else{if(_BdBrowser.safari){var s=d.createElement("SCRIPT");s.type="text/javascript";s.appendChild(d.createTextNode(code));d.documentElement.appendChild(s)}else{eval.call(w,code)}}};BdEditor.prototype.makeEditable=function(){var F=this.document;if(_BdBrowser.ie){F.body.disabled=true;F.body.contentEditable=true;F.body.removeAttribute("disabled");try{F.execCommand("BackgroundImageCache",false,true)}catch(G){}}else{try{F.body.spellcheck=false;F.designMode="on";try{F.execCommand("styleWithCSS",false,false)}catch(H){F.execCommand("useCSS",false,true)}F.execCommand("enableObjectResizing",false,true);F.execCommand("enableInlineTableEditing",false,false)}catch(E){}}this.textarea.style.display="none"};BdEditor.prototype.attachEventListener=function(){var E=this,G=E.document;var F=function(){var A=E.modules._TiSmiley.layer;if(A){A.hide()}if(_BdBrowser.ie){A=E.modules._LightFont.layer;if(A){A.hide()}}};if(_BdBrowser.ie){G.body.attachEvent("onfocus",F)}else{G.addEventListener("focus",F,false)}if(!_BdBrowser.ie){return false}G.attachEvent("onbeforedeactivate",function(A){var B=G.selection;var C=B.createRange();E.ieSelectionType=B.type.toLowerCase();if("control"==E.ieSelectionType){E.ieSelectionControl=C(0)}else{E.ieSelectionBookmark=C.getBookmark()}});G.attachEvent("onactivate",function(A){var B;try{if("control"==E.ieSelectionType){B=G.body.createControlRange();B.add(E.ieSelectionControl)}else{B=G.body.createTextRange();B.moveToBookmark(E.ieSelectionBookmark)}B.select();E.ieSelectionControl=E.ieSelectionBookmark=null}catch(A){}});function H(){var A=G.selection;var B=A.type.toLowerCase();if("control"==B){var D=A.createRange();for(var C=D.length-1;C>=0;C--){D(C).parentNode.removeChild(D(C))}return false}return true}G.attachEvent("onkeydown",function(A){var A=E.window.event||A;var B=A.which||A.keyCode||A.charCode;var D=0;if(A.ctrlKey||A.metaKey){D+=1000}if(A.shiftKey){D+=2000}if(A.altKey){D+=4000}var C=B+D;if(C==8){return(A.returnValue=H())}return(A.returnValue=true)});return false};BdEditor.prototype.getHtml=function(){var D=this.document.body.innerHTML.replace(/<(p|div)[^>]*>/gi,"<br/>").replace(/<\/\s*(p|div)\s*>/gi,"");var C=D.replace(/^(<br([^>])*\/?>)+/gi,"");if(_BdBrowser.ie){if(this.lightFontModule.checked){C='<span style="filter:glow(color='+this.lightFontColor+',strength=2);height:0px;color:#FFFFFF">'+C+"</span>"}}return C};function _ToolbarItemBase(){this.tooltipname="";this.tooltip="";this.cssName="Lightfont";this.commandName="";this.disabled=false;this.editor=BdEditor.instance;_Instance[this.hashCode=uniqueID()]=this}_System.extend(_ToolbarItemBase.prototype,{execute:function(){},render:function(){var B="<div class='ToolbarItem' title='"+this.tooltip+"' id='ToolbarItem_{0}'  onclick=\"_Instance['{0}'].clickHandler(this)\" onmouseup=\"_Instance['{0}'].mouseUpHandler(this)\" onmousedown=\"_Instance['{0}'].mouseDownHandler(this)\" onmouseout=\"_Instance['{0}'].mouseOutHandler(this)\" onmouseover=\"_Instance['{0}'].mouseOverHandler(this)\" ><div class='img "+this.cssName+"' alt='"+this.tooltip+"' /><font style='font-size:12px'>"+this.tooltipname+"</font></div>";return B.format(this.hashCode)},getContainer:function(){return _Bd$("ToolbarItem_"+this.hashCode)},_ac:function(B){_BdElement.addClassName(this.getContainer(),B)},_rc:function(B){_BdElement.removeClassName(this.getContainer(),B)},mouseUpHandler:function(B){if(!this.disabled){this._rc("mousedown")}},mouseDownHandler:function(B){if(!this.disabled){this._ac("mousedown")}},mouseOutHandler:function(B){if(!this.disabled){this._rc("mouseover");this._rc("mousedown")}},mouseOverHandler:function(B){if(!this.disabled){this._ac("mouseover")}},clickHandler:function(){if(this.disabled){return }this.execute();if(!_BdBrowser.ie){this.editor.window.focus()}}});function _LightFont(){_ToolbarItemBase.call(this);this.tooltip="\u95ea\u5149\u5b57";this.tooltipname='<font id="LightFont_Font_'+parent.BdEditor.instance.hashCode+'" style="font-size:10px; color:#000000;">\u25bc</font>&nbsp;\u95ea\u5149\u5b57';this.layer=_BdPopupLayer.provider();this.layer.exclusive=true;this._isFirstExecute=true;this._isCreated=false;this.disabled=false;this.initialize()}_LightFont.Extends(_ToolbarItemBase);_LightFont.prototype.initialize=function(){var B=this;this.layer.onshow=function(){var A=B.getContainer();A.onmouseover=A.onmouseout=function(){return false};B._ac("mouseover")};this.layer.onhide=function(){var A=B.getContainer();A.onmouseover=function(){B.mouseOverHandler(this)};A.onmouseout=function(){B.mouseOutHandler(this)};B._rc("mouseover")}};_LightFont.prototype.clickHandler=function(){if(!this._isCreated){this._isCreated=true;var U=["00","33","66","99","cc","ff","00","33","66","99","cc","ff"];var Q=[];var R,S,W;for(var a=0;a<12;a++){R=U[a];for(var b=0;b<3;b++){if(a>=6){W=U[b+3]}else{W=U[b]}for(var T=0;T<6;T++){S=U[T];Q[Q.length]="#"+W+S+R}}}var X=['<table width="199px" height="133px" cellspacing="1" cellpadding="0" bgcolor="#000000" >'];var V=0;var P=_BdBrowser.ie?10:8;for(var a=0;a<12;a++){X.push("<tr>");for(var b=0;b<18;b++){var O=Q[V++];X.push('<td bgcolor="'+O+'" width="10px" height="10px" style="cursor:pointer;font-size:1px"><div style="width:'+P+"px; height:"+P+"px; border:#000 solid 0px\" onmouseover=\"parent.BdEditor.instance.modules['_LightFont'].over(this);\" onmouseout=\"parent.BdEditor.instance.modules['_LightFont'].out(this);\" onclick=\"parent.BdEditor.instance.modules['_LightFont'].execute('"+O+"',this);\"></div></td>")}X.push("</tr>")}X.push("</table>");Q=U=W=S=R=P=V=null;var Y=X.join("");var Z=["<html><head><title>color panel</title></head><body>"];Z.push('<div id="colorPanel" style="width:180px;height:120px">');Z.push(Y);Z.push("</div></body></html>");Z=Z.join("");this.layer.write(Z);this.layer.style.border="solid 1px #A9CCDD"}else{}this.layer.style.height="133px";this.layer.showByXYWH(this.getContainer(),-125,0,_BdBrowser.ie?"201":"201",_BdBrowser.ie?"135":"135")};_LightFont.prototype.execute=function(D,E){E.style.border="#000 solid 0px";var F=this;F.layer.hide();parent.BdEditor.instance.lightFontColor=D;_Bd$("LightFont_Font_"+parent.BdEditor.instance.hashCode).style.color=D;if(_Bd$("_LightFont"+parent.BdEditor.instance.hashCode).checked){parent.BdEditor.instance.setCookie("BDLFONT",D.replace("#",""))}};_LightFont.prototype.over=function(B){B.style.border="#000 solid 1px"};_LightFont.prototype.out=function(B){B.style.border="#000 solid 0px"};function _TiSmiley(){_ToolbarItemBase.call(this);this.tabFlags=[0,0,0,0,0];this.tooltip="\u63d2\u5165\u8868\u60c5";this.tooltipname="\u63d2\u5165\u8868\u60c5";this.cssName="Smiley";this.commandName="InsertSmiley";this.smileyPath="http://img.baidu.com/hi/face/";this.smileyImages=[];this.layer=_BdPopupLayer.provider();this.layer.exclusive=true;this._isFirstExecute=true;this.initialize()}_TiSmiley.Extends(_ToolbarItemBase);_TiSmiley.prototype.initialize=function(){var B=this;this.layer.onshow=function(){var A=B.getContainer();A.onmouseover=A.onmouseout=function(){return false};B._ac("mouseover")};this.layer.onhide=function(){var A=B.getContainer();A.onmouseover=function(){B.mouseOverHandler(this)};A.onmouseout=function(){B.mouseOutHandler(this)};B._rc("mouseover")}};_TiSmiley.prototype.over=function(E,D){var F=this.layer.getElementById("tabIconReview");this.layer.getElementById("faceReview").style.backgroundImage="url("+E+")";if(D==1){F.style.display="block";F.style.left="4px";F.style.top="3px"}else{F.style.display="block";F.style.left="228px";F.style.top="3px"}};_TiSmiley.prototype.out=function(D){var C=this.layer.getElementById("tabIconReview");C.style.display="none"};_TiSmiley.prototype.switchTab=function(I){var J=7;if(I==4){this.layer.getElementById("tab4").style.height="150px"}for(var H=0;H<J;H++){var G=this.layer.getElementById("tab"+H);var F=this.layer.getElementById("tab"+H+"M");if(H==I){if(this.tabFlags[I]==0){this.tabFlags[I]=1;this.createTab("tab"+I)}G.style.display="block";F.className="tabMenuHover"}else{G.style.display="none";F.className="tabMenuNoHover"}}};FCKConfig={};FCKConfig.SmileyInfor={tab0:[],tab1:[],tab2:[],tab3:[],tab4:[],tab5:[],tab6:[]};FCKConfig.SmileyInfor.tab0=["Kiss","Love","Yeah","\u554a\uff01","\u80cc\u626d","\u9876","\u6296\u80f8","88","\u6c57","\u778c\u7761","\u9c81\u62c9","\u62cd\u7816","\u63c9\u8138","\u751f\u65e5\u5feb\u4e50","\u5927\u7b11","\u7011\u5e03\u6c57~","\u60ca\u8bb6","\u81ed\u7f8e","\u50bb\u7b11","\u629b\u5a9a\u773c","\u53d1\u6012","\u6253\u9171\u6cb9","\u4fef\u5367\u6491","\u6c14\u6124","\u56e7","\u543b","\u6012","\u80dc\u5229","HI","KISS","\u4e0d\u8bf4","\u4e0d\u8981","\u626f\u82b1","\u5927\u5fc3","\u9876","\u5927\u60ca","\u98de\u543b","\u9b3c\u8138","\u5bb3\u7f9e","\u53e3\u6c34","\u72c2\u54ed","\u6765","\u53d1\u8d22\u4e86","\u5403\u897f\u74dc","\u5957\u7262","\u5bb3\u7f9e","\u5e86\u795d","\u6211\u6765\u4e86","\u6572\u6253","\u6655\u4e86","\u80dc\u5229","\u81ed\u7f8e","\u88ab\u6253\u4e86","\u8d2a\u5403","\u8fce\u63a5","\u9177","","","","","","","","","","","","","","","\u5f00\u5fc3","\u5077\u7b11","\u5927\u54ed","\u6ef4\u6c57","\u53f9\u6c14","\u8d85\u8d5e","\u56e7\u56e7","\u98de\u543b","\u5929\u4f7f","\u6492\u82b1","\u751f\u6c14","\u88ab\u7838","\u5413\u50bb","\u968f\u610f\u5410"];FCKConfig.SmileyInfor.tab1=["Kiss","Love","Yeah","\u554a\uff01","\u80cc\u626d","\u9876","\u6296\u80f8","88","\u6c57","\u778c\u7761","\u9c81\u62c9","\u62cd\u7816","\u63c9\u8138","\u751f\u65e5\u5feb\u4e50","\u644a\u624b","\u7761\u89c9","\u762b\u5750","\u65e0\u804a","\u661f\u661f\u95ea","\u65cb\u8f6c","\u4e5f\u4e0d\u884c","\u90c1\u95f7","\u6b63Music","\u6293\u5899","\u649e\u5899\u81f3\u6b7b","\u6b6a\u5934","\u6233\u773c","\u98d8\u8fc7","\u4e92\u76f8\u62cd\u7816","\u780d\u6b7b\u4f60","\u6254\u684c\u5b50","\u5c11\u6797\u5bfa","\u4ec0\u4e48\uff1f","\u8f6c\u5934","\u6211\u7231\u725b\u5976","\u6211\u8e22","\u6447\u6643","\u6655\u53a5","\u5728\u7b3c\u5b50\u91cc","\u9707\u8361"];FCKConfig.SmileyInfor.tab2=["\u5927\u7b11","\u7011\u5e03\u6c57~","\u60ca\u8bb6","\u81ed\u7f8e","\u50bb\u7b11","\u629b\u5a9a\u773c","\u53d1\u6012","\u6211\u9519\u4e86","money","\u6c14\u6124","\u6311\u9017","\u543b","\u6012","\u80dc\u5229","\u59d4\u5c48","\u53d7\u4f24","\u8bf4\u5565\u5462\uff1f","\u95ed\u5634","\u4e0d","\u9017\u4f60\u73a9\u513f","\u98de\u543b","\u7729\u6655","\u9b54\u6cd5","\u6211\u6765\u4e86","\u7761\u4e86","\u6211\u6253","\u95ed\u5634","\u6253","\u6253\u6655\u4e86","\u5237\u7259","\u7206\u63cd","\u70b8\u5f39","\u5012\u7acb","\u522e\u80e1\u5b50","\u90aa\u6076\u7684\u7b11","\u4e0d\u8981\u4e0d\u8981","\u7231\u604b\u4e2d","\u653e\u5927\u4ed4\u7ec6\u770b","\u5077\u7aa5","\u8d85\u9ad8\u5174","\u6655","\u677e\u53e3\u6c14","\u6211\u8dd1","\u4eab\u53d7","\u4fee\u517b","\u54ed","\u6c57","\u554a~","\u70ed\u70c8\u6b22\u8fce","\u6253\u9171\u6cb9","\u4fef\u5367\u6491","\u56e7"];FCKConfig.SmileyInfor.tab3=["HI","KISS","\u4e0d\u8bf4","\u4e0d\u8981","\u626f\u82b1","\u5927\u5fc3","\u9876","\u5927\u60ca","\u98de\u543b","\u9b3c\u8138","\u5bb3\u7f9e","\u53e3\u6c34","\u72c2\u54ed","\u6765","\u6cea\u773c","\u6d41\u6cea","\u751f\u6c14","\u5410\u820c","\u559c\u6b22","\u65cb\u8f6c","\u518d\u89c1","\u6293\u72c2","\u6c57","\u9119\u89c6","\u62dc","\u5410\u8840","\u5618","\u6253\u4eba","\u8e66\u8df3","\u53d8\u8138","\u626f\u8089","\u5403To","\u5403\u82b1","\u5439\u6ce1\u6ce1\u7cd6","\u5927\u53d8\u8eab","\u98de\u5929\u821e","\u56de\u7738","\u53ef\u601c","\u731b\u62bd","\u6ce1\u6ce1","\u82f9\u679c","\u4eb2","","\u9a9a\u821e","\u70e7\u9999","\u7761","\u5957\u5a03\u5a03","\u6345\u6345","\u821e\u5012","\u897f\u7ea2\u67ff","\u7231\u6155","\u6447","\u6447\u6446","\u6742\u800d","\u62db\u8d22","\u88ab\u6bb4","\u88ab\u7403\u95f7","\u5927\u60ca","\u7406\u60f3","\u6b27\u6253","\u5455\u5410","\u788e","\u5410\u75f0"];FCKConfig.SmileyInfor.tab4=["\u53d1\u8d22\u4e86","\u5403\u897f\u74dc","\u5957\u7262","\u5bb3\u7f9e","\u5e86\u795d","\u6211\u6765\u4e86","\u6572\u6253","\u6655\u4e86","\u80dc\u5229","\u81ed\u7f8e","\u88ab\u6253\u4e86","\u8d2a\u5403","\u8fce\u63a5","\u9177","\u9876","\u5e78\u8fd0","\u7231\u5fc3","\u8eb2","\u9001\u82b1","\u9009\u62e9"];FCKConfig.SmileyInfor.tab5=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];FCKConfig.SmileyInfor.tab6=["\u7537\u515c","\u5973\u515c","\u5f00\u5fc3","\u4e56\u4e56","\u5077\u7b11","\u5927\u7b11","\u62bd\u6ce3","\u5927\u54ed","\u65e0\u5948","\u6ef4\u6c57","\u53f9\u6c14","\u72c2\u6655","\u59d4\u5c48","\u8d85\u8d5e","\u56e7\u56e7","\u7591\u95ee","\u98de\u543b","\u5929\u4f7f","\u6492\u82b1","\u751f\u6c14","\u88ab\u7838","\u53e3\u6c34","\u6cea\u5954","\u5413\u50bb","\u5410\u820c\u5934","\u70b9\u5934","\u968f\u610f\u5410","\u65cb\u8f6c","\u56f0\u56f0","\u9119\u89c6","\u72c2\u9876","\u7bee\u7403","\u518d\u89c1","\u6b22\u8fce\u5149\u4e34","\u606d\u559c\u53d1\u8d22","\u7a0d\u7b49","\u6211\u5728\u7ebf","\u6055\u4e0d\u8bae\u4ef7","\u5e93\u623f\u6709\u8d27","\u8d27\u5728\u8def\u4e0a"];FCKConfig.SmileyBox={tab0:[],tab1:[],tab2:[],tab3:[],tab4:[],tab5:[],tab6:[]};function initImgBox(H,G,J){if(H.length){return }var F="";for(var I=1;I<=J;I++){F=G;if(I<10){F=F+"0"}F=F+I+".gif";H.push(F)}}initImgBox(FCKConfig.SmileyBox.tab0,"j_00",84);initImgBox(FCKConfig.SmileyBox.tab1,"t_00",40);initImgBox(FCKConfig.SmileyBox.tab2,"w_00",52);initImgBox(FCKConfig.SmileyBox.tab3,"B_00",63);initImgBox(FCKConfig.SmileyBox.tab4,"C_00",20);initImgBox(FCKConfig.SmileyBox.tab5,"i_f",50);initImgBox(FCKConfig.SmileyBox.tab6,"y_00",40);var faceBox=FCKConfig.SmileyBox;var inforBox=FCKConfig.SmileyInfor;_TiSmiley.prototype.createTab=function(v){var o=_System.imagePath;var q="?v=1.1";FaceHandler={imageFolders:{tab0:"jx2/",tab1:"tsj/",tab2:"ldw/",tab3:"bobo/",tab4:"babycat/",tab5:"face/",tab6:"youa/"},imageReviewFolders:{tab0:"jx_review/",tab1:"tsj_review/",tab2:"bobo_review/",tab3:"tsj_review/",tab4:"babycat_review/",tab5:"face/",tab6:"youa/"},imageWidth:{tab0:36,tab1:35,tab2:35,tab3:36,tab4:35,tab5:25,tab6:35},imageCols:{tab0:7,tab1:7,tab2:7,tab3:7,tab4:7,tab5:7,tab6:7},imageColWidth:{tab0:35,tab1:35,tab2:35,tab3:35,tab4:35,tab5:35,tab6:35},tableWidth:{tab0:263,tab1:280,tab2:263,tab3:263,tab4:280,tab5:263,tab6:280},imageCss:{tab0:"jd",tab1:"tsj",tab2:"ldw",tab3:"bb",tab4:"cat",tab5:"pp",tab6:"youa"},imageCssOffset:{tab0:35,tab1:35,tab2:35,tab3:35,tab4:35,tab5:25,tab6:35}};var k=o+FaceHandler.imageFolders[v];var i=o+FaceHandler.imageReviewFolders[v];var b=FaceHandler.tableWidth;var l=FaceHandler.imageWidth;var a=FaceHandler.imageCols[v];var m=a/2;var g=FaceHandler.imageColWidth;var u=FaceHandler.imageCss[v];var n=FaceHandler.imageCssOffset[v];var s=this.layer.getElementById(v);var j=['<table cellpadding="0" cellspacing="0"  style="border-collapse:collapse;" border="1" bordercolor="#B8B3FF" width='+b[v]+'  height="100%">'];for(var d=0,t=faceBox[v].length;d<t;){j.push("<tr>");for(var e=0;e<a;e++,d++){var c=faceBox[v][d];if(c){var h=k+c+q;var Y=k+c;var f=i+c;var r=e<m?0:1;var p=n*d*(-1)-1;var Z=inforBox[v][d];j.push('<td width="'+g[v]+'"  height="'+g[v]+'" align="center" valign="middle" style="background-color:#FFFFFF;" onmouseover="this.style.backgroundColor=\'#E8E8FD\'"  onmouseout="this.style.backgroundColor=\'#FFFFFF\'" >');j.push('<span class="'+u+'"  style="display:block;">');j.push('<img title="'+Z+'" style="background-position:left '+p+'px;"  width="'+l[v]+'" height="'+l[v]+"\" onclick=\"parent.BdEditor.instance.modules['_TiSmiley'].execute('"+Y+"');\" src=\"http://img.baidu.com/hi/default/0.gif\" onmouseover=\"parent.BdEditor.instance.modules['_TiSmiley'].over('"+h+"',"+r+');"  onmouseout="parent.BdEditor.instance.modules[\'_TiSmiley\'].out();" /></td>');j.push("</span>")}else{j.push("<td>&nbsp;")}j.push("</td>")}j.push("</tr>")}j.push("</table>");j=j.join("");s.innerHTML=j};_TiSmiley.prototype.clickHandler=function(){this.tabFlags=[0,0,0,0,0,0,0];var C=[];C.push('<div id="tabPanel" class="tabPanel" >');C.push('	<div id="tabContent" class="tabContent">');C.push('		<div id="tab0" class="tabContentShow">0__tabContent</div>');C.push('		<div id="tab1" class="tabContentHide">1__tabContent</div>');C.push('		<div id="tab2" class="tabContentHide">2__tabContent</div>');C.push('		<div id="tab3" class="tabContentHide">3__tabContent</div>');C.push('      	<div id="tab4" class="tabContentHide">4__tabContent</div>');C.push('         <div id="tab5" class="tabContentHide">5__tabContent</div>');C.push('         <div id="tab6" class="tabContentHide">6__tabContent</div>');C.push("	</div>");C.push('	<div id="tabMenu" class="tabMenu" >');C.push('		<div id="tab0M" class="tabMenuHover"   		onClick="parent.BdEditor.instance.modules[\'_TiSmiley\'].switchTab(0)">&nbsp;&nbsp;&nbsp;<u>\u7cbe\u9009</u>&nbsp;&nbsp;&nbsp;</div>');C.push('		<div id="tab1M" class="tabMenuNoHover" 	onClick="parent.BdEditor.instance.modules[\'_TiSmiley\'].switchTab(1)">&nbsp;<u>\u5154\u65af\u57fa</u>&nbsp;</div>');C.push('		<div id="tab2M" class="tabMenuNoHover" 	onClick="parent.BdEditor.instance.modules[\'_TiSmiley\'].switchTab(2)">&nbsp;<u>\u7eff\u8c46\u86d9</u>&nbsp;</div>');C.push('		<div id="tab3M" class="tabMenuNoHover" 	onClick="parent.BdEditor.instance.modules[\'_TiSmiley\'].switchTab(3)">&nbsp;&nbsp;<u>BOBO</u>&nbsp;&nbsp;</div>');C.push('       <div id="tab4M" class="tabMenuNoHover" 	onClick="parent.BdEditor.instance.modules[\'_TiSmiley\'].switchTab(4)">&nbsp;&nbsp;<u>baby\u732b</u>&nbsp;&nbsp;</div>');C.push('       <div id="tab5M" class="tabMenuNoHover" 	onClick="parent.BdEditor.instance.modules[\'_TiSmiley\'].switchTab(5)">&nbsp;&nbsp;<u>\u6ce1\u6ce1</u>&nbsp;&nbsp;</div>');C.push('       <div id="tab6M" class="tabMenuNoHover"    onClick="parent.BdEditor.instance.modules[\'_TiSmiley\'].switchTab(6)">&nbsp;&nbsp;<u>\u6709\u554a</u>&nbsp;&nbsp;</div>');C.push("	</div>");C.push("</div>");C.push('<div id="tabIconReview" class="tabStyle">');var D=_System.imagePath;C.push('<img id="faceReview" class="review"  src="http://img.baidu.com/hi/default/0.gif"/>');C.push("</div>");C=C.join("");this.layer.write(C);this.layer.style.border="solid 1px #A9CCDD";this.layer.showBy(this.getContainer(),_BdBrowser.ie?"346":"346",_BdBrowser.ie?"255":"255");this.createTab("tab0");this.switchTab(0)};_TiSmiley.prototype.execute=function(N){var S=this;S.layer.hide();S.editor.window.focus();if(_BdBrowser.ie){var P=S.editor.document.selection;var R=P.type.toLowerCase();if("control"==R){var O=P.createRange();var K=O(0);K.insertAdjacentHTML("beforeBegin",'<img src="'+N+'">');for(var L=O.length-1;L>=0;L--){O(L).parentNode.removeChild(O(L))}}else{var T=P.createRange();T.pasteHTML('<img src="'+N+'"/>')}}else{var M=S.editor.document.createElement("IMG");M.src=N;var P=S.editor.window.getSelection();var T=P.getRangeAt(0);T.deleteContents();T.insertNode(M);var Q=S.editor.document.createRange();Q.selectNode(M);P.removeAllRanges();P.addRange(Q);P.collapseToEnd();if(S._isFirstExecute){S.editor.document.execCommand("insertHTML",false,"<br>\x00");S._isFirstExecute=false}}};